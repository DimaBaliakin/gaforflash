#summary HOWTO Dist.
#sidebar TOC

== Introduction ==

A distribution is a frozen and stable build.

Most of the things are automated by the build but some little things still need
to be done "by hand".

== Versioning ==

We keep our *major*, *minor* and *build* version in the `version.properties` file.

`/src/com/google/analytics/version.properties`
{{{
version.major=1
version.minor=0
version.build=0
}}}

This file is shared by the AS3 source code and the Ant properties<br>
don't add any `;` at the end of the lines

The *revision* number is defined in the *API* class and use the *Rev* `svn:keyword`

`/src/com/google/analytics/API.as`
{{{
//...
version.revision = "$Rev: 234 $ ".split( " " )[1];
//...
}}}

This allow us to keep our build revision number in sync with the latest revision of the repository which just a little catch.

The `analytics_flash.swc`, because it is generated by hand,
will have a revision number of `rev n-1`.<br>


== Checklist ==

 * Do all your commits, updates, etc.
 * run the unit tests
 * edit the `version.properties`<br>update accordingly and commit
 * open the file `/fla/Analytics.fla`<br>select the `Analytics` component<br>right-click `Component Definition...`<br>click `OK` (this will sync the component with the last edits in the source code)
 * select the `Analytics` component again<br>right-click `Export SWC File...`<br>save as `/fla/analytics_flash.swc`
 * save the `Analytics.fla`
 * commit the updated `analytics.swc` and `Analytics.fla`
 * edit `API.as`<br>just change 1 char (either add or remove 1 space)<br>this will force the *Rev* property to sync with the repo
 * edit the *changelog*<br>start an entry with `* major.minor.build.revision+1`<br>if the current rev is `123`, define `* 1.0.0.124`<br>list all your changes
 * commit all
 * now generate the build
 * upload the build to the GC project
 * generate a tag for the build
 * generate a branch if needed

== Announce ==

Send an email to the google group, list the changelog<br>
and link to `http://code.google.com/p/gaforflash/issues/list?can=1&q=label%3ARelease1.0.0`<br>
replace `1.0.0` with the current build number